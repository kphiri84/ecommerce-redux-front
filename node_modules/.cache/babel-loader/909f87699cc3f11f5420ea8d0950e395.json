{"ast":null,"code":"var _jsxFileName = \"/home/kenny/ecommerce-front1/src/components/Login.js\";\nimport React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport Form from 'react-validation/build/form';\nimport Input from 'react-validation/build/input';\nimport CheckButton from 'react-validation/build/button';\nimport { login } from '../actions/auth.action';\n\nconst required = value => {\n  if (!value) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 4\n      }\n    }, \"Champs requis!\");\n  }\n};\n\nconst Login = props => {\n  const form = useRef();\n  const checkBtn = useRef();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const {\n    isLoggedIn\n  } = useSelector(state => state.auth);\n  const {\n    message\n  } = useSelector(state => state.message);\n  const dispatch = useDispatch();\n\n  const onChangeEmail = e => {\n    const email = e.target.value;\n    setEmail(email);\n  };\n\n  const onChangePassword = e => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = e => {\n    e.preventDefault();\n    setLoading(true);\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      dispatch(login(email, password)).then(() => {\n        window.location.reload();\n      }).catch(() => {\n        setLoading(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  };\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 10\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleLogin,\n    ref: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"email\",\n    value: email,\n    onChange: onChangeEmail,\n    validations: [required],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    className: \"form-control\",\n    name: \"password\",\n    value: password,\n    onChange: onChangePassword,\n    validations: [required],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary btn-block\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, loading && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"spinner-border spinner-border-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 20\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 8\n    }\n  }, \"Se connecter\"))), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 8\n    }\n  }, message)), /*#__PURE__*/React.createElement(CheckButton, {\n    style: {\n      display: 'none'\n    },\n    ref: checkBtn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 6\n    }\n  }))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/kenny/ecommerce-front1/src/components/Login.js"],"names":["React","useState","useRef","useDispatch","useSelector","Redirect","Form","Input","CheckButton","login","required","value","Login","props","form","checkBtn","email","setEmail","password","setPassword","loading","setLoading","isLoggedIn","state","auth","message","dispatch","onChangeEmail","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","then","window","location","reload","catch","display"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\n\nimport Form from 'react-validation/build/form';\nimport Input from 'react-validation/build/input';\nimport CheckButton from 'react-validation/build/button';\n\nimport { login } from '../actions/auth.action';\n\nconst required = (value) => {\n\tif (!value) {\n\t\treturn (\n\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\tChamps requis!\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nconst Login = (props) => {\n\tconst form = useRef();\n\tconst checkBtn = useRef();\n\n\tconst [ email, setEmail ] = useState('');\n\tconst [ password, setPassword ] = useState('');\n\tconst [ loading, setLoading ] = useState(false);\n\n\tconst { isLoggedIn } = useSelector((state) => state.auth);\n\tconst { message } = useSelector((state) => state.message);\n\n\tconst dispatch = useDispatch();\n\n\tconst onChangeEmail = (e) => {\n\t\tconst email = e.target.value;\n\t\tsetEmail(email);\n\t};\n\n\tconst onChangePassword = (e) => {\n\t\tconst password = e.target.value;\n\t\tsetPassword(password);\n\t};\n\n\tconst handleLogin = (e) => {\n\t\te.preventDefault();\n\n\t\tsetLoading(true);\n\n\t\tform.current.validateAll();\n\n\t\tif (checkBtn.current.context._errors.length === 0) {\n\t\t\tdispatch(login(email, password))\n\t\t\t\t.then(() => {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t});\n\t\t} else {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tif (isLoggedIn) {\n\t\treturn <Redirect to=\"/\" />;\n\t}\n\n\treturn (\n\t\t<div className=\"col-md-12\">\n\t\t\t<div className=\"card card-container\">\n\t\t\t\t<Form onSubmit={handleLogin} ref={form}>\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label htmlFor=\"email\">Email</label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonChange={onChangeEmail}\n\t\t\t\t\t\t\tvalidations={[ required ]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<label htmlFor=\"password\">Mot de passe</label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={onChangePassword}\n\t\t\t\t\t\t\tvalidations={[ required ]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t<button className=\"btn btn-primary btn-block\" disabled={loading}>\n\t\t\t\t\t\t\t{loading && <span className=\"spinner-border spinner-border-sm\" />}\n\t\t\t\t\t\t\t<span>Se connecter</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{message && (\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<CheckButton style={{ display: 'none' }} ref={checkBtn} />\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}